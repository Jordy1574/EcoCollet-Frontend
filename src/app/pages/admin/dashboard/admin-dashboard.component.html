<div class="admin-dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <h1>Panel de Administración</h1>
    <div class="user-info">
      <span>{{user?.email}}</span>
      <button (click)="logout()">Cerrar sesión</button>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="dashboard-nav">
    <button [class.active]="currentSection === 'dashboard'" (click)="setActiveSection('dashboard')">Dashboard</button>
    <button [class.active]="currentSection === 'usuarios'" (click)="setActiveSection('usuarios')">Usuarios</button>
    <button [class.active]="currentSection === 'citas'" (click)="setActiveSection('citas')">Citas</button>
    <button [class.active]="currentSection === 'puntos'" (click)="setActiveSection('puntos')">Puntos de Reciclaje</button>
    <button [class.active]="currentSection === 'materiales'" (click)="setActiveSection('materiales')">Materiales</button>
    <button [class.active]="currentSection === 'configuracion'" (click)="setActiveSection('configuracion')">Configuración</button>
  </nav>

  <!-- Main Content -->
  <main class="dashboard-content">
    <!-- Dashboard Section -->
    <section *ngIf="currentSection === 'dashboard'" class="dashboard-section">
      <h2>Resumen General</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <h3>Total Materiales Reciclados</h3>
          <p>{{getTotalMateriales()}} kg</p>
        </div>
        <div class="stat-card">
          <h3>Promedio Mensual</h3>
          <p>{{getPromedioMensual()}} kg</p>
        </div>
        <div class="stat-card">
          <h3>Crecimiento</h3>
          <p>{{getCrecimiento()}}%</p>
        </div>
      </div>
    </section>

    <!-- Users Section -->
    <section *ngIf="currentSection === 'usuarios'" class="users-section">
      <h2>Usuarios Registrados</h2>
      <div class="users-grid">
        <div *ngFor="let usuario of usuarios" class="user-card">
          <div class="user-header">
            <div class="user-avatar">{{getInitials(usuario.nombre)}}</div>
            <div class="user-info">
              <h3>{{usuario.nombre}}</h3>
              <p>{{usuario.email}}</p>
            </div>
          </div>
          <div class="user-details">
            <span [class]="getRoleBadgeClass(usuario.rol)">{{usuario.rol}}</span>
            <span [class]="getStatusBadgeClass(usuario.estado)">{{usuario.estado}}</span>
            <p>{{usuario.distrito}}</p>
            <p class="date">Registro: {{usuario.fechaRegistro}}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Appointments Section -->
    <section *ngIf="currentSection === 'citas'" class="appointments-section">
      <h2>Citas Programadas</h2>
      <div class="appointments-list">
        <div *ngFor="let cita of citas" class="appointment-card">
          <div class="appointment-header">
            <h3>Cita {{cita.id}}</h3>
            <span [class]="getAppointmentStatusClass(cita.estado)">{{cita.estado}}</span>
          </div>
          <div class="appointment-details">
            <p><strong>Usuario:</strong> {{cita.usuario.nombre}}</p>
            <p><strong>Dirección:</strong> {{cita.usuario.direccion}}</p>
            <p><strong>Material:</strong> {{cita.material.tipo}} - {{cita.material.cantidad}}</p>
            <p><strong>Fecha:</strong> {{cita.fecha.dia}} - {{cita.fecha.hora}}</p>
            <p *ngIf="cita.recolector"><strong>Recolector:</strong> {{cita.recolector}}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Recycling Points Section -->
    <section *ngIf="currentSection === 'puntos'" class="points-section">
      <h2>Puntos de Reciclaje</h2>
      <div class="points-grid">
        <div *ngFor="let punto of puntosReciclaje" class="point-card">
          <div class="point-header">
            <div [class]="getPointTypeIconClass(punto.tipo)" class="point-icon"></div>
            <div class="point-info">
              <h3>{{punto.nombre}}</h3>
              <p>{{punto.tipoTexto}}</p>
            </div>
            <span [class]="getPointStatusClass(punto.estado)">{{punto.estado}}</span>
          </div>
          <div class="point-details">
            <p><strong>Dirección:</strong> {{punto.direccion}}</p>
            <p><strong>Horario:</strong> {{punto.horario}}</p>
            <div class="materials-list">
              <span *ngFor="let material of punto.materiales" class="material-tag">{{material}}</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Materials Section -->
    <section *ngIf="currentSection === 'materiales'" class="materials-section">
      <h2>Materiales Reciclados</h2>
      <div class="materials-grid">
        <div *ngFor="let material of materiales" class="material-card">
          <div class="material-header">
            <div [class]="getMaterialIconClass(material.tipo)" class="material-icon"></div>
            <div class="material-info">
              <h3>{{material.nombre}}</h3>
              <p>{{material.cantidad}}</p>
            </div>
          </div>
          <div class="material-details">
            <p><strong>Precio Promedio:</strong> {{material.info?.precioPromedio}}</p>
            <p><strong>Puntos Activos:</strong> {{material.info?.puntosActivos}}</p>
            <p><strong>Última Actualización:</strong> {{material.info?.ultimaActualizacion}}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Configuration Section -->
    <section *ngIf="currentSection === 'configuracion'" class="config-section">
      <h2>Configuración del Sistema</h2>
      <div class="config-content">
        <div class="config-card">
          <h3>Información General</h3>
          <div class="config-details">
            <p><strong>Nombre del Sistema:</strong> {{configuracion.nombreSistema}}</p>
            <p><strong>Email de Contacto:</strong> {{configuracion.emailContacto}}</p>
            <p><strong>Zona Horaria:</strong> {{configuracion.zonaHoraria}}</p>
          </div>
        </div>

        <div class="config-card">
          <h3>Seguridad</h3>
          <div class="config-details">
            <p><strong>Doble Autenticación:</strong> {{configuracion.seguridad.dobleAutenticacion ? 'Activada' : 'Desactivada'}}</p>
            <p><strong>Sesión Segura:</strong> {{configuracion.seguridad.sesionSegura ? 'Activada' : 'Desactivada'}}</p>
          </div>
        </div>

        <div class="config-card">
          <h3>Notificaciones</h3>
          <div class="config-details">
            <p><strong>Email:</strong> {{configuracion.notificaciones.email ? 'Activadas' : 'Desactivadas'}}</p>
            <p><strong>SMS:</strong> {{configuracion.notificaciones.sms ? 'Activados' : 'Desactivados'}}</p>
            <p><strong>Push:</strong> {{configuracion.notificaciones.push ? 'Activadas' : 'Desactivadas'}}</p>
          </div>
        </div>

        <div class="config-card">
          <h3>Backup</h3>
          <div class="config-details">
            <p><strong>Backup Automático:</strong> {{configuracion.backupAutomatico ? 'Activado' : 'Desactivado'}}</p>
            <p><strong>Último Backup:</strong> {{configuracion.ultimoBackup}}</p>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>